<!DOCTYPE html>

<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="author" content="James Brechtel" />
    <meta name='viewport' content='width=device-width; user-scalable=no'/>
    <title>Plant Test Factory for .NET</title>
    <link href='http://fonts.googleapis.com/css?family=Voltaire|Carme' rel='stylesheet' type='text/css'/>
    <link href='/stylesheets/site.css' rel='stylesheet' type='text/css'/>
    <link href='/atom.xml' rel='alternate' type='application/atom+xml' title='Atom feed for nevercertain.com'/>
  </head>
  <body>
    <header>
      <section class="blog_title">
        <a href="/"> never certain - a blog by James Brechtel </a>
      </aside>
    </header>
    <article>
  <header>
  <a href="/2010/09/01/plant-test-factory-for-dotnet.html">Plant Test Factory for .NET</a>
    <br><span class="date">September  1, 2010</span>
  </header>
  <p><a href="http://github.com/jbrechtel/plant">Plant</a> is a test factory for .NET 4.0. I created Plant because factories
like this are something that I've gotten very used to in Ruby.  As I started
writing more and more tests in my C# projects, I noticed that I was writing
more and more helper test methods to create commonly used model objects in my
tests.  This would often lead to ad-hoc and abused chunks of code that became
harder and harder to maintain.  The Ruby ecosystem has good answers to this
problem, there’s <a href="http://github.com/thoughtbot/factory_girl">factory_girl</a> and <a href="http://github.com/notahat/machinist">machinist</a>.  I couldn’t find
anything like that for .NET.  <a href="http://nbuilder.org/">NBuilder</a> is in that area, but feels too
heavy handed for what I wanted.</p>

<h6>Goals</h6>

<p>The primary goal of this tool is to allow you to write smaller and more
focused tests.  I find this beneficial because, like most other things in
software, tests with fewer concerns tend to be easier to maintain and provide
more value.  Tests which test less are more resistant to illegitimate
failures. A secondary goal of mine is to keep Plant’s syntax as lightweight
and concise as possible.  Code with less noise is easier to understand and
code that’s easier to understand helps you get your job done.  C# doesn’t
always make this easy.  Not being able to assign a delegate to an anonymous
type forces me to require users to use a special class for some things (i.e.
LazyProperty).  As this project grows, I’ll do my best to keep the syntax
readable.</p>

<h6>Direction</h6>

<p>The only client of the Plant project at the moment is pretty small and will
likely never use all of Plant’s features.  However, instead of dreaming up
features that I think will one day be useful for Plant I decided to copy
factory_girl’s feature-set.   I’ve used factory_girl quite a bit in the past
and found almost every one of its features useful at some point or another.
So far I’ve got several of factory_girl’s features implemented, one it doesn’t
have (creation via constructor parameters), and there are several Plant is
still missing.</p>

<p><strong>Plant’s features at the time of this writing are</strong></p>

<ul>
<li>Object creation via properties</li>
<li>Object creation via constructor arguments</li>
<li>Overriding default property and constructor argument values</li>
<li>Module object definition</li>
<li>Lazily evaluated property and constructor argument values</li>
</ul>


<p><strong>Upcoming features</strong></p>

<ul>
<li>Allowing multiple named definitions for one object</li>
<li>Sequenced properties (you can do this today with lazy properties, but I want to make it easier)</li>
<li>Lazy associations (again, something you can do today with lazy properties, but the syntax can be more concise and explicit)</li>
<li>Allow user to specify after-creation actions to be taken on created objects (like saving them to a database)</li>
</ul>


<p><strong>Scenarios that Plant does not support</strong></p>

<ul>
<li>Constructor arguments whose names differ only in capitalization.</li>
<li>Indexed properties</li>
<li><p>Refactoring.  Since properties are passed around using anonymous objects,
refactoring tools will miss them.  This can be fixed for properties but not
for constructor arguments.  I’m not sure what the right answer is here.</p></li>
<li><p>Open generic types (You can tell Plant how to create a Foo<string>, but
not a Foo<T> where T is specified at time of creation.</p></li>
</ul>


<p>Find it on Github here: <a href="http://github.com/jbrechtel/plant">http://github.com/jbrechtel/plant</a> (the current
release is tagged 0.1.0 <a href="http://github.com/jbrechtel/plant/tree/0.1.0">here</a>) It will be available on <a href="http://nu.wikispot.org/">Nu</a> shortly.</p>

</article>

<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'nevercertain';

    // The following are highly recommended additional parameters. Remove the slashes in front to use.
    // var disqus_identifier = 'unique_dynamic_id_1234';
    // var disqus_url = 'http://example.com/permalink-to-page.html';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

  </body>
  <script type="text/javascript">
    //<![CDATA[
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-9950155-2']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    //]]>
  </script>
</html>
